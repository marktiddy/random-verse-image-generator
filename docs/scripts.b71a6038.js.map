{"version":3,"sources":["node_modules/html-to-image/lib/utils.js","node_modules/html-to-image/lib/clonePseudoElements.js","node_modules/html-to-image/lib/cloneNode.js","node_modules/html-to-image/lib/getBlobFromURL.js","node_modules/html-to-image/lib/embedResources.js","node_modules/html-to-image/lib/embedWebFonts.js","node_modules/html-to-image/lib/embedImages.js","node_modules/html-to-image/lib/createSvgDataURL.js","node_modules/html-to-image/lib/applyStyleWithOptions.js","node_modules/html-to-image/lib/index.js","node_modules/downloadjs/download.js","scripts.js"],"names":["getBgImage","randomNum","Math","floor","random","bgElement","document","getElementById","style","backgroundImage","toggleTextColor","buttonPressed","quoteText","classList","add","remove","loadVerse","url","apiResult","$","ajax","crossDomain","dataType","success","result","then","quote","link","verse","text","replace","innerHTML","bookname","chapter","innerText","saveImage","node","htmlToImage","toPng","dataUrl","catch","error","ready","click"],"mappings":"AQAA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWFA;ADEA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWHA;ADGA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWVA,IAAMA,UAAU,GAAG,SAAbA,UAAa,GAAM;ADUzB,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWVE;ADUF,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWVE,MAAIC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,CAAhB;ADUF,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTE,MAAMC,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAlB;ADSF,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTEF,EAAAA,SAAS,CAACG,KAAV,CAAgBC,eAAhB,GAAkC,EAAlC;ADSF,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWREJ,EAAAA,SAAS,CAACG,KAAV,CAAgBC,eAAhB,2FAAmHR,SAAnH;ADQF,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRC,CARD;ADgBA,AFCA,ANAA,ADAA,AMAA,ADAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRA,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,CAACC,aAAD,EAAmB;ADQ3C,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRE,MAAMC,SAAS,GAAGN,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAlB;ADQF,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTE,MAAII,aAAa,KAAK,OAAtB,EAA+B;ADSjC,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIC,IAAAA,SAAS,CAACC,SAAV,CAAoBC,GAApB,CAAwB,aAAxB;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIF,IAAAA,SAAS,CAACC,SAAV,CAAoBE,MAApB,CAA2B,aAA3B;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIH,IAAAA,SAAS,CAACC,SAAV,CAAoBE,MAApB,CAA2B,YAA3B;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTG,GAJD,MAIO,IAAIJ,aAAa,KAAK,OAAtB,EAA+B;ADSxC,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIC,IAAAA,SAAS,CAACC,SAAV,CAAoBC,GAApB,CAAwB,aAAxB;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIF,IAAAA,SAAS,CAACC,SAAV,CAAoBE,MAApB,CAA2B,aAA3B;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIH,IAAAA,SAAS,CAACC,SAAV,CAAoBE,MAApB,CAA2B,YAA3B;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTG,GAJM,MAIA;ADST,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIH,IAAAA,SAAS,CAACC,SAAV,CAAoBC,GAApB,CAAwB,YAAxB;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIF,IAAAA,SAAS,CAACC,SAAV,CAAoBE,MAApB,CAA2B,aAA3B;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIH,IAAAA,SAAS,CAACC,SAAV,CAAoBE,MAApB,CAA2B,aAA3B;ADSJ,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTG;ADSH,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTC,CAfD;ADwBA,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,ADAA,AKAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;ADSxB,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTE,MAAMC,GAAG,GAAG,sDAAZ;ADSF,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTE,MAAIC,SAAJ;ADSF,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTEC,EAAAA,CAAC,CAACC,IAAF,CAAO;ADST,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWTIH,IAAAA,GAAG,EACD,0EAFG;ADUT,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRII,IAAAA,WAAW,EAAE,IAHR;ADWT,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRIC,IAAAA,QAAQ,EAAE,OAJL;ADYT,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRIC,IAAAA,OAAO,EAAE,iBAAUC,MAAV,EAAkB;ADQ/B,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRMN,MAAAA,SAAS,GAAGM,MAAM,CAAC,CAAD,CAAlB;ADQN,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRK;ADQL,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWhBS,GAAP,EAQGC,IARH,CAQQ,YAAM;ADQhB,ARCA,AIAA,AFAA,ACAA,AFAA,AMAA,ATAA,AWRI,QAAMC,KAAK,GAAGpB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAd,CADY,CAGZ;ADMJ,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWPI,QAAMoB,IAAI,GACR,wFADF;ADOJ,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWNI,QAAMC,KAAK,GAAGV,SAAS,CAACW,IAAV,CAAeC,OAAf,CAAuBH,IAAvB,EAA6B,EAA7B,CAAd;ADMJ,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWPI,QAAIT,SAAJ,EAAe;ADOnB,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWPMQ,MAAAA,KAAK,CAACK,SAAN,GACE,YAAIH,KAAJ,oDACiCV,SAAS,CAACc,QAD3C,cACuDd,SAAS,CAACe,OADjE,cAC4Ef,SAAS,CAACU,KADtF,YADF;ADON,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLK,KAJD,MAIO;ADKX,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLMF,MAAAA,KAAK,CAACQ,SAAN,GAAkB,6BAAlB;ADKN,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLK;ADKL,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLG,GAtBD;AD2BF,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLC,CA1BD,EA4BA;ADGA,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA;AUAA,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;ADKxB,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLE,MAAMC,IAAI,GAAG9B,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CAAb;ADKF,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWLE8B,EAAAA,WAAW,CACRC,KADH,CACSF,IADT,EAEGX,IAFH,CAEQ,UAAUc,OAAV,EAAmB;ADG7B,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWHM,6BAASA,OAAT,EAAkB,oBAAlB;ADGN,ARCA,AEAA,ACAA,AFAA,AMAA,ATAA,AWHK,GAJH,EAKGC,KALH,CAKS,UAAUC,KAAV,EAAiB,CACtB;ADCN,ARCA,AGAA,AFAA,AMAA,ATAA,AWDK,GAPH;ADQF,ARCA,AGAA,AFAA,AMAA,ATAA,AWDC,CAVD,EAYA;ADDA,ARCA,AGAA,AFAA,AMAA,ATAA;AUAA,ARCA,AGAA,AFAA,AMAA,ATAA;AUAA,ARCA,AGAA,AFAA,AMAA,ATAA,AWDAtB,CAAC,CAACb,QAAD,CAAD,CAAYoC,KAAZ,CAAkB,YAAM;ADCxB,ARCA,AGAA,AFAA,AMAA,ATAA,AWDE1B,EAAAA,SAAS;ADCX,ALCA,AFAA,AMAA,ATAA,AWDEhB,EAAAA,UAAU;ADCZ,ALCA,AFAA,AMAA,ATAA,AWDC,CAHD,GAKA;ADDA,ALCA,AFAA,AMAA,ATAA;AUAA,ALCA,AIAA,ATAA,AWAAmB,CAAC,CAAC,gBAAD,CAAD,CAAoBwB,KAApB,CAA0B,YAAM;ADAhC,ALCA,AIAA,ATAA,AWAE3C,EAAAA,UAAU;ADAZ,ALCA,AIAA,ATAA,AWAC,CAFD;ADEA,ALCA,AIAA,ATAA,AWCAmB,CAAC,CAAC,gBAAD,CAAD,CAAoBwB,KAApB,CAA0B,YAAM;ADDhC,ALCA,AIAA,ATAA,AWCE3B,EAAAA,SAAS;ADDX,ALCA,ALAA,AWCC,CAFD;ADCA,ALCA,ALAA,AWEAG,CAAC,CAAC,eAAD,CAAD,CAAmBwB,KAAnB,CAAyB,YAAM;ADF/B,ALCA,ALAA,AWEER,EAAAA,SAAS;ADFX,ALCA,ALAA,AWEC,CAFD;ADAA,ALCA,ALAA,AWGAhB,CAAC,CAAC,iBAAD,CAAD,CAAqBwB,KAArB,CAA2B,YAAM;ADHjC,ALCA,ALAA,AWGEjC,EAAAA,eAAe,CAAC,OAAD,CAAf;ADHF,ALCA,ALAA,AWGC,CAFD;ADDA,ALCA,ALAA,AWIAS,CAAC,CAAC,iBAAD,CAAD,CAAqBwB,KAArB,CAA2B,YAAM;ADJjC,ALCA,ALAA,AWIEjC,EAAAA,eAAe,CAAC,OAAD,CAAf;ADJF,ALCA,ALAA,AWIC,CAFD;ADFA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA,ALAA;AUAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AKAA,ALCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts.b71a6038.js","sourceRoot":"..","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nexports.uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    var counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    var randomFourChars = function () {\n        return (\"0000\" + (Math.random() * (Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n    };\n    return function () {\n        counter += 1;\n        return \"u\" + randomFourChars() + counter;\n    };\n}());\nfunction parseExtension(url) {\n    var match = /\\.([^./]*?)$/g.exec(url);\n    if (match)\n        return match[1];\n    return '';\n}\nexports.parseExtension = parseExtension;\nfunction getMimeType(url) {\n    var ext = parseExtension(url).toLowerCase();\n    return mimes[ext] || '';\n}\nexports.getMimeType = getMimeType;\nfunction delay(ms) {\n    return function (args) { return new Promise((function (resolve) {\n        setTimeout(function () {\n            resolve(args);\n        }, ms);\n    })); };\n}\nexports.delay = delay;\nfunction createImage(url) {\n    return new Promise((function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n            resolve(image);\n        };\n        image.onerror = reject;\n        image.crossOrigin = 'anonymous';\n        image.src = url;\n    }));\n}\nexports.createImage = createImage;\nfunction isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexports.isDataUrl = isDataUrl;\nfunction toDataURL(content, mimeType) {\n    return \"data:\" + mimeType + \";base64,\" + content;\n}\nexports.toDataURL = toDataURL;\nfunction getDataURLContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexports.getDataURLContent = getDataURLContent;\nfunction toBlob(canvas) {\n    return new Promise((function (resolve) {\n        var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        var len = binaryString.length;\n        var binaryArray = new Uint8Array(len);\n        for (var i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], {\n            type: 'image/png',\n        }));\n    }));\n}\nfunction canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise((function (resolve) {\n            canvas.toBlob(resolve);\n        }));\n    }\n    return toBlob(canvas);\n}\nexports.canvasToBlob = canvasToBlob;\nfunction toArray(arrayLike) {\n    var arr = [];\n    for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nexports.toArray = toArray;\nfunction px(node, styleProperty) {\n    var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(value.replace('px', ''));\n}\nfunction getNodeWidth(node) {\n    var leftBorder = px(node, 'border-left-width');\n    var rightBorder = px(node, 'border-right-width');\n    return node.scrollWidth + leftBorder + rightBorder;\n}\nexports.getNodeWidth = getNodeWidth;\nfunction getNodeHeight(node) {\n    var topBorder = px(node, 'border-top-width');\n    var bottomBorder = px(node, 'border-bottom-width');\n    return node.scrollHeight + topBorder + bottomBorder;\n}\nexports.getNodeHeight = getNodeHeight;\nfunction getPixelRatio() {\n    return (window.devicePixelRatio || 1);\n}\nexports.getPixelRatio = getPixelRatio;\nfunction svgToDataURL(svg) {\n    return Promise.resolve()\n        .then(function () { return new XMLSerializer().serializeToString(svg); })\n        .then(encodeURIComponent)\n        .then(function (html) { return \"data:image/svg+xml;charset=utf-8,\" + html; });\n}\nexports.svgToDataURL = svgToDataURL;\nfunction getBlobFromImageURL(url) {\n    return createImage(url).then(function (image) {\n        var width = image.width, height = image.height;\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var ratio = getPixelRatio();\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = \"\" + width;\n        canvas.style.height = \"\" + height;\n        context.scale(ratio, ratio);\n        context.drawImage(image, 0, 0);\n        var dataURL = canvas.toDataURL(getMimeType(url));\n        return getDataURLContent(dataURL);\n    });\n}\nexports.getBlobFromImageURL = getBlobFromImageURL;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction formatCssText(style) {\n    var content = style.getPropertyValue('content');\n    return style.cssText + \" content: \" + content + \";\";\n}\nfunction formatCssProperties(style) {\n    return utils_1.toArray(style).map(function (name) {\n        var value = style.getPropertyValue(name);\n        var priority = style.getPropertyPriority(name);\n        return name + \": \" + value + (priority ? ' !important' : '') + \";\";\n    }).join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\" + className + \":\" + pseudo;\n    var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n    return document.createTextNode(selector + \"{\" + cssText + \"}\");\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    var className = utils_1.uuid();\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.className = clonedNode.className + \" \" + className;\n    clonedNode.appendChild(styleElement);\n}\nfunction clonePseudoElements(nativeNode, clonedNode) {\n    [\n        ':before',\n        ':after',\n    ].forEach(function (pseudo) { return clonePseudoElement(nativeNode, clonedNode, pseudo); });\n}\nexports.default = clonePseudoElements;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar clonePseudoElements_1 = __importDefault(require(\"./clonePseudoElements\"));\nfunction cloneSingleNode(nativeNode) {\n    if (nativeNode instanceof HTMLCanvasElement) {\n        return utils_1.createImage(nativeNode.toDataURL());\n    }\n    if (nativeNode.tagName && nativeNode.tagName.toLowerCase() === 'svg') {\n        return Promise.resolve(nativeNode)\n            .then(function (svg) { return utils_1.svgToDataURL(svg); })\n            .then(utils_1.createImage);\n    }\n    return Promise.resolve(nativeNode.cloneNode(false));\n}\nfunction cloneChildren(nativeNode, clonedNode, filter) {\n    var children = utils_1.toArray(nativeNode.childNodes);\n    if (children.length === 0) {\n        return Promise.resolve(clonedNode);\n    }\n    // clone children in order\n    return children.reduce(function (done, child) { return done\n        .then(function () { return cloneNode(child, filter); })\n        .then(function (clonedChild) {\n        if (clonedChild) {\n            clonedNode.appendChild(clonedChild);\n        }\n    }); }, Promise.resolve())\n        .then(function () { return clonedNode; });\n}\nfunction cloneCssStyle(nativeNode, clonedNode) {\n    var source = window.getComputedStyle(nativeNode);\n    var target = clonedNode.style;\n    if (source.cssText) {\n        target.cssText = source.cssText;\n    }\n    else {\n        utils_1.toArray(source).forEach(function (name) {\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (nativeNode instanceof HTMLTextAreaElement) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (nativeNode instanceof HTMLInputElement) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    if (!(clonedNode instanceof Element)) {\n        return clonedNode;\n    }\n    return Promise.resolve()\n        .then(function () { return cloneCssStyle(nativeNode, clonedNode); })\n        .then(function () { return clonePseudoElements_1.default(nativeNode, clonedNode); })\n        .then(function () { return cloneInputValue(nativeNode, clonedNode); })\n        .then(function () { return clonedNode; });\n}\nfunction cloneNode(domNode, filter, isRoot) {\n    if (!isRoot && filter && !filter(domNode)) {\n        return Promise.resolve(null);\n    }\n    return Promise.resolve(domNode)\n        .then(cloneSingleNode)\n        .then(function (clonedNode) { return cloneChildren(domNode, clonedNode, filter); })\n        .then(function (clonedNode) { return decorate(domNode, clonedNode); });\n}\nexports.default = cloneNode;\n","\"use strict\";\n/* tslint:disable:max-line-length */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\n// KNOWN ISSUE\n// -----------\n// Can not handle redirect-url, such as when access 'http://something.com/avatar.png'\n// will redirect to 'http://something.com/65fc2ffcc8aea7ba65a1d1feda173540'\nvar TIMEOUT = 30000;\nfunction getBlobFromURL(url, options) {\n    // cache bypass so we dont have CORS issues with cached images\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        url += ((/\\?/).test(url) ? '&' : '?') + (new Date()).getTime(); // tslint:disable-line\n    }\n    var failed = function (reason) {\n        var placeholder = '';\n        if (options.imagePlaceholder) {\n            var split = options.imagePlaceholder.split(/,/);\n            if (split && split[1]) {\n                placeholder = split[1];\n            }\n        }\n        var msg = \"Failed to fetch resource: \" + url;\n        if (reason) {\n            msg = typeof reason === 'string' ? reason : reason.message;\n        }\n        if (msg) {\n            console.error(msg);\n        }\n        return placeholder;\n    };\n    var deferred = window.fetch\n        // fetch\n        ? window.fetch(url)\n            .then(function (response) { return response.blob(); })\n            .then(function (blob) { return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onloadend = function () { return resolve(reader.result); };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        }); })\n            .then(utils_1.getDataURLContent)\n            .catch(function () { return new Promise(function (resolve, reject) {\n            reject();\n        }); })\n        // xhr\n        : new Promise((function (resolve, reject) {\n            var req = new XMLHttpRequest();\n            var timeout = function () {\n                reject(new Error(\"Timeout of \" + TIMEOUT + \"ms occured while fetching resource: \" + url));\n            };\n            var done = function () {\n                if (req.readyState !== 4) {\n                    return;\n                }\n                if (req.status !== 200) {\n                    reject(new Error(\"Failed to fetch resource: \" + url + \", status: \" + req.status));\n                    return;\n                }\n                var encoder = new FileReader();\n                encoder.onloadend = function () {\n                    resolve(utils_1.getDataURLContent(encoder.result));\n                };\n                encoder.readAsDataURL(req.response);\n            };\n            req.onreadystatechange = done;\n            req.ontimeout = timeout;\n            req.responseType = 'blob';\n            req.timeout = TIMEOUT;\n            req.open('GET', url, true);\n            req.send();\n        }));\n    return deferred.catch(failed);\n}\nexports.default = getBlobFromURL;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar getBlobFromURL_1 = __importDefault(require(\"./getBlobFromURL\"));\nvar utils_1 = require(\"./utils\");\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nfunction resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    var doc = document.implementation.createHTMLDocument();\n    var base = doc.createElement('base');\n    var a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nfunction escape(url) {\n    return url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n}\nfunction urlToRegex(url) {\n    return new RegExp(\"(url\\\\(['\\\"]?)(\" + escape(url) + \")(['\\\"]?\\\\))\", 'g');\n}\nfunction parseURLs(str) {\n    var result = [];\n    str.replace(URL_REGEX, function (raw, quotation, url) {\n        result.push(url);\n        return raw;\n    });\n    return result.filter(function (url) { return !utils_1.isDataUrl(url); });\n}\nfunction embed(cssString, resourceURL, baseURL, options) {\n    var resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n    return Promise.resolve(resolvedURL)\n        .then(function (url) { return getBlobFromURL_1.default(url, options); })\n        .then(function (data) { return utils_1.toDataURL(data, utils_1.getMimeType(resourceURL)); })\n        .then(function (dataURL) { return cssString.replace(urlToRegex(resourceURL), \"$1\" + dataURL + \"$3\"); })\n        .then(function (content) { return content; }, function () { return resolvedURL; });\n}\nfunction shouldEmbed(string) {\n    return string.search(URL_REGEX) !== -1;\n}\nexports.shouldEmbed = shouldEmbed;\nfunction embedResources(cssString, baseUrl, options) {\n    if (!shouldEmbed(cssString)) {\n        return Promise.resolve(cssString);\n    }\n    return Promise.resolve(cssString)\n        .then(parseURLs)\n        .then(function (urls) { return urls.reduce(function (done, url) { return done.then(function (ret) { return embed(ret, url, baseUrl, options); }); }, Promise.resolve(cssString)); });\n}\nexports.default = embedResources;\n","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar embedResources_1 = __importStar(require(\"./embedResources\"));\nfunction parseCSS(source) {\n    if (source === undefined) {\n        return [];\n    }\n    var cssText = source;\n    var css = [];\n    var cssKeyframeRegex = '((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})';\n    var combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]'\n        + '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})'; // to match css & media queries together\n    var cssCommentsRegex = new RegExp('(\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)', 'gi');\n    // strip out comments\n    cssText = cssText.replace(cssCommentsRegex, '');\n    var keyframesRegex = new RegExp(cssKeyframeRegex, 'gi');\n    var arr;\n    while (true) {\n        arr = keyframesRegex.exec(cssText);\n        if (arr === null) {\n            break;\n        }\n        css.push(arr[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    // unified regex\n    var unified = new RegExp(combinedCSSRegex, 'gi');\n    while (true) {\n        arr = unified.exec(cssText);\n        if (arr === null) {\n            break;\n        }\n        css.push(arr[0]);\n    }\n    return css;\n}\nfunction fetchCSS(url, sheet) {\n    return fetch(url).then(function (res) {\n        return {\n            url: url,\n            cssText: res.text(),\n        };\n    }, function (e) {\n        console.log('ERROR FETCHING CSS: ', e.toString());\n    });\n}\nfunction embedFonts(data) {\n    return data.cssText.then(function (resolved) {\n        var cssText = resolved;\n        var fontLocations = cssText.match(/url\\([^)]+\\)/g) || [];\n        var fontLoadedPromises = fontLocations.map(function (location) {\n            var url = location.replace(/url\\(([^]+)\\)/g, '$1');\n            if (!url.startsWith('https://')) {\n                var source = data.url;\n                url = new URL(url, source).href;\n            }\n            return new Promise(function (resolve, reject) {\n                fetch(url)\n                    .then(function (res) { return res.blob(); })\n                    .then(function (blob) {\n                    var reader = new FileReader();\n                    reader.addEventListener('load', function (res) {\n                        // Side Effect\n                        cssText = cssText.replace(location, \"url(\" + reader.result + \")\");\n                        resolve([location, reader.result]);\n                    });\n                    reader.readAsDataURL(blob);\n                })\n                    .catch(reject);\n            });\n        });\n        return Promise.all(fontLoadedPromises).then(function () { return cssText; });\n    });\n}\nfunction getCssRules(styleSheets) {\n    var ret = [];\n    var promises = [];\n    // First loop inlines imports\n    styleSheets.forEach(function (sheet) {\n        if ('cssRules' in sheet) {\n            try {\n                utils_1.toArray(sheet.cssRules).forEach(function (item) {\n                    if (item.type === CSSRule.IMPORT_RULE) {\n                        promises.push(fetchCSS(item.href, sheet)\n                            .then(embedFonts)\n                            .then(function (cssText) {\n                            var parsed = parseCSS(cssText);\n                            parsed.forEach(function (rule) {\n                                sheet.insertRule(rule, sheet.cssRules.length);\n                            });\n                        })\n                            .catch(function (e) {\n                            console.log('Error loading remote css', e.toString());\n                        }));\n                    }\n                });\n            }\n            catch (e) {\n                var inline_1 = styleSheets.find(function (a) { return a.href === null; }) || document.styleSheets[0];\n                if (sheet.href != null) {\n                    promises.push(fetchCSS(sheet.href, inline_1)\n                        .then(embedFonts)\n                        .then(function (cssText) {\n                        var parsed = parseCSS(cssText);\n                        parsed.forEach(function (rule) {\n                            inline_1.insertRule(rule, sheet.cssRules.length);\n                        });\n                    })\n                        .catch(function (e) {\n                        console.log('Error loading remote stylesheet', e.toString());\n                    }));\n                }\n                console.log('Error inlining remote css file', e.toString());\n            }\n        }\n    });\n    return Promise\n        .all(promises)\n        .then(function () {\n        // Second loop parses rules\n        styleSheets.forEach(function (sheet) {\n            if ('cssRules' in sheet) {\n                try {\n                    utils_1.toArray(sheet.cssRules).forEach(function (item) {\n                        ret.push(item);\n                    });\n                }\n                catch (e) {\n                    console.log(\"Error while reading CSS rules from \" + sheet.href, e.toString());\n                }\n            }\n        });\n        return ret;\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter(function (rule) { return rule.type === CSSRule.FONT_FACE_RULE; })\n        .filter(function (rule) { return embedResources_1.shouldEmbed(rule.style.getPropertyValue('src')); });\n}\nfunction parseWebFontRules(clonedNode) {\n    return new Promise(function (resolve, reject) {\n        if (!clonedNode.ownerDocument) {\n            reject(new Error('Provided element is not within a Document'));\n        }\n        resolve(utils_1.toArray(clonedNode.ownerDocument.styleSheets));\n    })\n        .then(getCssRules)\n        .then(getWebFontRules);\n}\nexports.parseWebFontRules = parseWebFontRules;\nfunction embedWebFonts(clonedNode, options) {\n    return parseWebFontRules(clonedNode)\n        .then(function (rules) { return Promise.all(rules.map(function (rule) {\n        var baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n        return embedResources_1.default(rule.cssText, baseUrl, options);\n    })); })\n        .then(function (cssStrings) { return cssStrings.join('\\n'); })\n        .then(function (cssString) {\n        var styleNode = document.createElement('style');\n        var sytleContent = document.createTextNode(cssString);\n        styleNode.appendChild(sytleContent);\n        if (clonedNode.firstChild) {\n            clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n        }\n        else {\n            clonedNode.appendChild(styleNode);\n        }\n        return clonedNode;\n    });\n}\nexports.default = embedWebFonts;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nvar getBlobFromURL_1 = __importDefault(require(\"./getBlobFromURL\"));\nvar embedResources_1 = __importDefault(require(\"./embedResources\"));\nfunction embedBackground(clonedNode, options) {\n    var background = clonedNode.style.getPropertyValue('background');\n    if (!background) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(background)\n        .then(function (cssString) { return embedResources_1.default(cssString, null, options); })\n        .then(function (cssString) {\n        clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n        return clonedNode;\n    });\n}\nfunction embedImageNode(clonedNode, options) {\n    if (!(clonedNode instanceof HTMLImageElement) || utils_1.isDataUrl(clonedNode.src)) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(clonedNode.src)\n        .then(function (url) { return getBlobFromURL_1.default(url, options); })\n        .then(function (data) { return utils_1.toDataURL(data, utils_1.getMimeType(clonedNode.src)); })\n        .then(function (dataURL) { return new Promise((function (resolve, reject) {\n        clonedNode.onload = resolve;\n        clonedNode.onerror = reject;\n        clonedNode.src = dataURL;\n    })); })\n        .then(function () { return clonedNode; }, function () { return clonedNode; });\n}\nfunction embedChildren(clonedNode, options) {\n    var children = utils_1.toArray(clonedNode.childNodes);\n    var deferreds = children.map(function (child) { return embedImages(child, options); });\n    return Promise.all(deferreds).then(function () { return clonedNode; });\n}\nfunction embedImages(clonedNode, options) {\n    if (!(clonedNode instanceof Element)) {\n        return Promise.resolve(clonedNode);\n    }\n    return Promise.resolve(clonedNode)\n        .then(function (node) { return embedBackground(node, options); })\n        .then(function (node) { return embedImageNode(node, options); })\n        .then(function (node) { return embedChildren(node, options); });\n}\nexports.default = embedImages;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\nfunction createSvgDataURL(clonedNode, width, height) {\n    var xmlns = 'http://www.w3.org/2000/svg';\n    var svg = document.createElementNS(xmlns, 'svg');\n    var foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttributeNS('', 'width', \"\" + width);\n    svg.setAttributeNS('', 'height', \"\" + height);\n    foreignObject.setAttributeNS('', 'width', '100%');\n    foreignObject.setAttributeNS('', 'height', '100%');\n    foreignObject.setAttributeNS('', 'x', '0');\n    foreignObject.setAttributeNS('', 'y', '0');\n    foreignObject.setAttributeNS('', 'externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(clonedNode);\n    return utils_1.svgToDataURL(svg);\n}\nexports.default = createSvgDataURL;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction applyStyleWithOptions(clonedNode, options) {\n    var style = clonedNode.style;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = options.width + \"px\";\n    }\n    if (options.height) {\n        style.height = options.height + \"px\";\n    }\n    if (options.style) {\n        Object.assign(style, options.style);\n    }\n    return clonedNode;\n}\nexports.default = applyStyleWithOptions;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cloneNode_1 = __importDefault(require(\"./cloneNode\"));\nvar embedWebFonts_1 = __importDefault(require(\"./embedWebFonts\"));\nvar embedImages_1 = __importDefault(require(\"./embedImages\"));\nvar createSvgDataURL_1 = __importDefault(require(\"./createSvgDataURL\"));\nvar applyStyleWithOptions_1 = __importDefault(require(\"./applyStyleWithOptions\"));\nvar utils_1 = require(\"./utils\");\nfunction getImageSize(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var width = options.width || utils_1.getNodeWidth(domNode);\n    var height = options.height || utils_1.getNodeHeight(domNode);\n    return { width: width, height: height };\n}\nfunction toSvgDataURL(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n    return cloneNode_1.default(domNode, options.filter, true)\n        .then(function (clonedNode) { return embedWebFonts_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return embedImages_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return applyStyleWithOptions_1.default(clonedNode, options); })\n        .then(function (clonedNode) { return createSvgDataURL_1.default(clonedNode, width, height); });\n}\nexports.toSvgDataURL = toSvgDataURL;\nfunction toCanvas(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toSvgDataURL(domNode, options)\n        .then(utils_1.createImage)\n        .then(utils_1.delay(100))\n        .then(function (image) {\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var ratio = utils_1.getPixelRatio();\n        var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = \"\" + width;\n        canvas.style.height = \"\" + height;\n        context.scale(ratio, ratio);\n        if (options.backgroundColor) {\n            context.fillStyle = options.backgroundColor;\n            context.fillRect(0, 0, canvas.width, canvas.height);\n        }\n        context.drawImage(image, 0, 0);\n        return canvas;\n    });\n}\nexports.toCanvas = toCanvas;\nfunction toPixelData(domNode, options) {\n    if (options === void 0) { options = {}; }\n    var _a = getImageSize(domNode, options), width = _a.width, height = _a.height;\n    return toCanvas(domNode, options)\n        .then(function (canvas) { return (canvas.getContext('2d').getImageData(0, 0, width, height).data); });\n}\nexports.toPixelData = toPixelData;\nfunction toPng(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(function (canvas) { return (canvas.toDataURL()); });\n}\nexports.toPng = toPng;\nfunction toJpeg(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(function (canvas) { return (canvas.toDataURL('image/jpeg', options.quality || 1)); });\n}\nexports.toJpeg = toJpeg;\nfunction toBlob(domNode, options) {\n    if (options === void 0) { options = {}; }\n    return toCanvas(domNode, options).then(utils_1.canvasToBlob);\n}\nexports.toBlob = toBlob;\nexports.default = {\n    toSvgDataURL: toSvgDataURL,\n    toCanvas: toCanvas,\n    toPixelData: toPixelData,\n    toPng: toPng,\n    toJpeg: toJpeg,\n    toBlob: toBlob,\n};\n","//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n","import * as htmlToImage from \"html-to-image\";\nimport download from \"downloadjs\";\nconst getBgImage = () => {\n  //The number is number of images\n  var randomNum = Math.floor(Math.random() * 24);\n\n  const bgElement = document.getElementById(\"image-container\");\n  bgElement.style.backgroundImage = \"\";\n\n  bgElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),url('bg-image-library/${randomNum}.jpg')`;\n};\n\nconst toggleTextColor = (buttonPressed) => {\n  const quoteText = document.getElementById(\"quote-text\");\n  if (buttonPressed === \"white\") {\n    quoteText.classList.add(\"white-quote\");\n    quoteText.classList.remove(\"black-quote\");\n    quoteText.classList.remove(\"teal-quote\");\n  } else if (buttonPressed === \"black\") {\n    quoteText.classList.add(\"black-quote\");\n    quoteText.classList.remove(\"white-quote\");\n    quoteText.classList.remove(\"teal-quote\");\n  } else {\n    quoteText.classList.add(\"teal-quote\");\n    quoteText.classList.remove(\"white-quote\");\n    quoteText.classList.remove(\"black-quote\");\n  }\n};\n\nconst loadVerse = () => {\n  const url = \"https://labs.bible.org/api/?passage=random&type=json\";\n  var apiResult;\n  $.ajax({\n    url:\n      \"https://labs.bible.org/api/?passage=random&type=json&callback=myCallback\",\n    crossDomain: true,\n    dataType: \"jsonp\",\n    success: function (result) {\n      apiResult = result[0];\n    },\n  }).then(() => {\n    const quote = document.getElementById(\"quote-text\");\n\n    //We need to remove the link from the end of the netbible link\n    const link =\n      '<a style=\"\" target=\"_blank\" href=\"http://netbible.com/net-bible-preface\">&copy;NET</a>';\n    const verse = apiResult.text.replace(link, \"\");\n    if (apiResult) {\n      quote.innerHTML =\n        `\"${verse}\"` +\n        `<span id=\"quote-source\"><br />${apiResult.bookname} ${apiResult.chapter}:${apiResult.verse}</span>`;\n    } else {\n      quote.innerText = \"Sorry, something went wrong\";\n    }\n  });\n};\n\n//Code to save\nconst saveImage = () => {\n  const node = document.getElementById(\"image-area-container\");\n  htmlToImage\n    .toPng(node)\n    .then(function (dataUrl) {\n      download(dataUrl, \"my-bible-verse.png\");\n    })\n    .catch(function (error) {\n      // console.error(\"oops, something went wrong!\", error);\n    });\n};\n\n//Generate when we load\n$(document).ready(() => {\n  loadVerse();\n  getBgImage();\n});\n\n//event listeners\n$(\"#new-image-btn\").click(() => {\n  getBgImage();\n});\n\n$(\"#new-verse-btn\").click(() => {\n  loadVerse();\n});\n\n$(\"#save-img-btn\").click(() => {\n  saveImage();\n});\n\n$(\"#black-text-btn\").click(() => {\n  toggleTextColor(\"black\");\n});\n\n$(\"#white-text-btn\").click(() => {\n  toggleTextColor(\"white\");\n});\n"]}